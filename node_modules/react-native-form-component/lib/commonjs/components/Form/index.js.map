{"version":3,"names":["submitForm","Form","props","width","setWidth","useState","opacity","setOpacity","handleButtonPress","fieldsWithError","Children","forEach","children","child","index","ref","current","getComponent","keyboardType","isRequired","value","customValidation","validation","containsError","status","push","label","placeholder","setState","length","console","error","JSON","stringify","onButtonPress","Platform","OS","keyboardVerticalOffset","undefined","style","styles","button","buttonStyle","color","radius","event","nativeEvent","layout","buttonText","buttonTextStyle","defaultProps","StyleSheet","create","height","justifyContent","alignItems","backgroundColor","colors","red","borderRadius","marginVertical","fontSize","fontWeight"],"sources":["index.tsx"],"sourcesContent":["import React, { Children, useState, ReactNode } from 'react';\nimport {\n  KeyboardAvoidingView,\n  Platform,\n  Pressable,\n  Text,\n  StyleSheet,\n  TextInputSubmitEditingEventData,\n  NativeSyntheticEvent,\n  ViewStyle,\n} from 'react-native';\n\nimport { containsError } from '../FormItem';\nimport { colors } from '../../colors';\n\ninterface Props {\n  children: ReactNode;\n  keyboardVerticalOffset?: number;\n  buttonText?: string;\n  buttonStyle?: object | object[];\n  buttonTextStyle?: object | object[];\n  onButtonPress: () => void;\n  style?: ViewStyle;\n}\n\nexport let submitForm: (\n  e?: NativeSyntheticEvent<TextInputSubmitEditingEventData>\n) => void;\n\nexport default function Form(props: Props) {\n  const [width, setWidth] = useState(0);\n  const [opacity, setOpacity] = useState(1);\n\n  const handleButtonPress = () => {\n    const fieldsWithError: string[] = [];\n    Children.forEach(props.children, (child, index) => {\n      //@ts-ignore\n      if (child && child.ref?.current?.getComponent() == 'FormItem') {\n        const {\n          keyboardType,\n          isRequired,\n          value,\n          customValidation,\n          //@ts-ignore\n        } = child.props;\n        let validation;\n\n        if (customValidation) validation = customValidation();\n        if (containsError(keyboardType, isRequired, value, validation).status) {\n          fieldsWithError.push(\n            //@ts-ignore\n            child.props.label || child.props.placeholder || 'FormItem' + index\n          );\n          //@ts-ignore\n          child.ref?.current.setState();\n        }\n      }\n    });\n\n    if (fieldsWithError.length) {\n      console.error(\n        'The following fields do not fulfil their conditions:\\n' +\n          JSON.stringify(fieldsWithError, null, 2)\n      );\n      return;\n    }\n\n    props.onButtonPress();\n  };\n\n  submitForm = () => handleButtonPress();\n\n  return (\n    <KeyboardAvoidingView\n      keyboardVerticalOffset={\n        Platform.OS == 'ios' ? props.keyboardVerticalOffset || 50 : undefined\n      }\n      behavior={Platform.OS == 'ios' ? 'padding' : undefined}\n      style={props.style}\n    >\n      {props.children}\n      <Pressable\n        style={[\n          styles.button,\n          Platform.OS == 'ios' ? { opacity } : undefined,\n          props.buttonStyle,\n        ]}\n        onPress={handleButtonPress}\n        android_ripple={{ color: 'lightgrey', radius: width }}\n        onLayout={(event) => setWidth(event.nativeEvent.layout.width)}\n        onPressIn={() => setOpacity(0.5)}\n        onPressOut={() => setOpacity(1)}\n      >\n        <Text style={[styles.buttonText, props.buttonTextStyle]}>\n          {props.buttonText || 'Submit'}\n        </Text>\n      </Pressable>\n    </KeyboardAvoidingView>\n  );\n}\n\nForm.defaultProps = {\n  style: {},\n};\n\nconst styles = StyleSheet.create({\n  button: {\n    height: 48,\n    justifyContent: 'center',\n    alignItems: 'center',\n    backgroundColor: colors.red,\n    borderRadius: 8,\n    marginVertical: 32,\n  },\n  buttonText: {\n    color: 'white',\n    fontSize: 16,\n    fontWeight: 'bold',\n  },\n});\n"],"mappings":"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"}